<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2133px" preserveAspectRatio="none" style="width:1238px;height:2133px;" version="1.1" viewBox="0 0 1238 2133" width="1238px" zoomAndPan="magnify"><defs><filter height="300%" id="f3sk17wiyl3l3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f3sk17wiyl3l3)" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="660.5" x="23" y="1115.0156"/><rect fill="#FFFFFF" height="56.9375" style="stroke: none; stroke-width: 1.0;" width="660.5" x="23" y="1174.2813"/><rect fill="#FFFFFF" filter="url(#f3sk17wiyl3l3)" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="592.5" x="23" y="1551.4141"/><rect fill="#FFFFFF" height="56.9375" style="stroke: none; stroke-width: 1.0;" width="592.5" x="23" y="1610.6797"/><rect fill="#FFFFFF" filter="url(#f3sk17wiyl3l3)" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="750.5" x="23" y="1943.6797"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="64" x2="64" y1="86.2969" y2="2046.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="678.5" x2="678.5" y1="86.2969" y2="2046.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="811.5" x2="811.5" y1="86.2969" y2="2046.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="895.5" x2="895.5" y1="86.2969" y2="2046.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1103" x2="1103" y1="86.2969" y2="2046.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="33" y="82.9951">Browser</text><ellipse cx="64.5" cy="13" fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M64.5,21 L64.5,48 M51.5,29 L77.5,29 M64.5,48 L51.5,63 M64.5,48 L77.5,63 " fill="none" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="33" y="2058.0732">Browser</text><ellipse cx="64.5" cy="2071.375" fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M64.5,2079.375 L64.5,2106.375 M51.5,2087.375 L77.5,2087.375 M64.5,2106.375 L51.5,2121.375 M64.5,2106.375 L77.5,2121.375 " fill="none" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="593.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="600.5" y="70.9951">Your custom backend</text><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="593.5" y="2045.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="600.5" y="2065.0732">Your custom backend</text><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="773.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="780.5" y="70.9951">WebDoc</text><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="773.5" y="2045.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="780.5" y="2065.0732">WebDoc</text><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="860.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="867.5" y="70.9951">WebBio</text><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="860.5" y="2045.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="867.5" y="2065.0732">WebBio</text><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="1078" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1085" y="70.9951">GIPS</text><rect fill="#FEFECE" filter="url(#f3sk17wiyl3l3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="1078" y="2045.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1085" y="2065.0732">GIPS</text><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1223" x="3" y="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="116.8633" y2="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="119.8633" y2="119.8633"/><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="108" x="560.5" y="106.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="566.5" y="122.3638">Initialization</text><polygon fill="#A80036" points="800,156.5625,810,160.5625,800,164.5625,804,160.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="806" y1="160.5625" y2="160.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="71.5" y="155.4966">Request document capture JavaScript SDK files</text><polygon fill="#A80036" points="75.5,170.5625,65.5,174.5625,75.5,178.5625,71.5,174.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="811" y1="174.5625" y2="174.5625"/><polygon fill="#A80036" points="884,199.6953,894,203.6953,884,207.6953,888,203.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="890" y1="203.6953" y2="203.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="348" x="71.5" y="198.6294">Request liveness (portrait) capture JavaScript SDK files</text><polygon fill="#A80036" points="75.5,213.6953,65.5,217.6953,75.5,221.6953,71.5,217.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="895" y1="217.6953" y2="217.6953"/><polygon fill="#A80036" points="800,242.8281,810,246.8281,800,250.8281,804,246.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="806" y1="246.8281" y2="246.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="71.5" y="241.7622">Check network conditions for Document Scan</text><polygon fill="#A80036" points="75.5,256.8281,65.5,260.8281,75.5,264.8281,71.5,260.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="811" y1="260.8281" y2="260.8281"/><polygon fill="#A80036" points="884,285.9609,894,289.9609,884,293.9609,888,289.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="890" y1="289.9609" y2="289.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="71.5" y="284.895">Check network conditions for Liveness (portrait)</text><polygon fill="#A80036" points="75.5,299.9609,65.5,303.9609,75.5,307.9609,71.5,303.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="895" y1="303.9609" y2="303.9609"/><polygon fill="#A80036" points="666.5,329.0938,676.5,333.0938,666.5,337.0938,670.5,333.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="672.5" y1="333.0938" y2="333.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="71.5" y="328.0278">Create GIPS Identity</text><path d="M69,346.0938 L69,371.0938 L355,371.0938 L355,356.0938 L345,346.0938 L69,346.0938 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M345,346.0938 L345,356.0938 L355,356.0938 L345,346.0938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="75" y="363.1606">POST {API_URL}/identity-proofing/identity</text><polygon fill="#A80036" points="1091,397.3594,1101,401.3594,1091,405.3594,1095,401.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="678.5" x2="1097" y1="401.3594" y2="401.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="685.5" y="396.2935">Create GIPS Identity</text><path d="M683,414.3594 L683,439.3594 L886,439.3594 L886,424.3594 L876,414.3594 L683,414.3594 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M876,414.3594 L876,424.3594 L886,424.3594 L876,414.3594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="689" y="431.4263">POST {GIPS_URL}/identities/</text><polygon fill="#A80036" points="689.5,465.625,679.5,469.625,689.5,473.625,685.5,469.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="683.5" x2="1102" y1="469.625" y2="469.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="695.5" y="464.5591">Receive GIPS Identity</text><polygon fill="#A80036" points="75.5,494.7578,65.5,498.7578,75.5,502.7578,71.5,498.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="677.5" y1="498.7578" y2="498.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="81.5" y="493.6919">Receive GIPS Identity</text><polygon fill="#A80036" points="666.5,523.8906,676.5,527.8906,666.5,531.8906,670.5,527.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="672.5" y1="527.8906" y2="527.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="71.5" y="522.8247">Create document session</text><path d="M69,540.8906 L69,565.8906 L327,565.8906 L327,550.8906 L317,540.8906 L69,540.8906 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M317,540.8906 L317,550.8906 L327,550.8906 L317,540.8906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="75" y="557.9575">POST {GIPS_URL}/document/session</text><polygon fill="#A80036" points="1091,592.1563,1101,596.1563,1091,600.1563,1095,596.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="678.5" x2="1097" y1="596.1563" y2="596.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="685.5" y="591.0903">Create document session</text><path d="M683,609.1563 L683,634.1563 L1192,634.1563 L1192,619.1563 L1182,609.1563 L683,609.1563 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1182,609.1563 L1182,619.1563 L1192,619.1563 L1182,609.1563 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="488" x="689" y="626.2231">POST {GIPS_URL}/identities/${identityId}/id-documents/live-capture-session</text><polygon fill="#A80036" points="689.5,660.4219,679.5,664.4219,689.5,668.4219,685.5,664.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="683.5" x2="1102" y1="664.4219" y2="664.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="695.5" y="659.356">Receive GIPS sessionId</text><polygon fill="#A80036" points="75.5,689.5547,65.5,693.5547,75.5,697.5547,71.5,693.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="677.5" y1="693.5547" y2="693.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="81.5" y="688.4888">Pass sessionId and identityId back to User Agent</text><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1223" x="3" y="722.1211"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="722.1211" y2="722.1211"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="725.1211" y2="725.1211"/><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="174" x="527.5" y="711.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="533.5" y="727.6216">Session is now ready</text><polygon fill="#A80036" points="666.5,761.8203,676.5,765.8203,666.5,769.8203,670.5,765.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="672.5" y1="765.8203" y2="765.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="71.5" y="760.7544">Send portrait consent</text><path d="M69,778.8203 L69,803.8203 L366,803.8203 L366,788.8203 L356,778.8203 L69,778.8203 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M356,778.8203 L356,788.8203 L366,788.8203 L356,778.8203 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="75" y="795.8872">POST {API_URL}/identity-proofing/consents</text><polygon fill="#A80036" points="1091,814.9531,1101,818.9531,1091,822.9531,1095,818.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="678.5" x2="1097" y1="818.9531" y2="818.9531"/><path d="M683,831.9531 L683,856.9531 L1030,856.9531 L1030,841.9531 L1020,831.9531 L683,831.9531 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1020,831.9531 L1020,841.9531 L1030,841.9531 L1020,831.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="689" y="849.02">POST {GIPS_URL}/identities/${identityId}/consents</text><polygon fill="#A80036" points="689.5,883.2188,679.5,887.2188,689.5,891.2188,685.5,887.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="683.5" x2="1102" y1="887.2188" y2="887.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="695.5" y="882.1528">Consent ID</text><polygon fill="#A80036" points="75.5,912.3516,65.5,916.3516,75.5,920.3516,71.5,916.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="677.5" y1="916.3516" y2="916.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="81.5" y="911.2856">Return consent ID to User Agent</text><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1223" x="3" y="944.918"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="944.918" y2="944.918"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="947.918" y2="947.918"/><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="157" x="536" y="934.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="542" y="950.4185">Capture document</text><polygon fill="#A80036" points="800,984.6172,810,988.6172,800,992.6172,804,988.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="806" y1="988.6172" y2="988.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="71.5" y="983.5513">Initialize doc capture client in the browser</text><path d="M69,1001.6172 L69,1026.6172 L403,1026.6172 L403,1011.6172 L393,1001.6172 L69,1001.6172 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M393,1001.6172 L393,1011.6172 L403,1011.6172 L393,1001.6172 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="75" y="1018.6841">See call to 'DocserverVideo.initDocCaptureClient'</text><polygon fill="#A80036" points="1091,1052.8828,1101,1056.8828,1091,1060.8828,1095,1056.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="812" x2="1097" y1="1056.8828" y2="1056.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="819" y="1051.8169">Data processing and aggregation on GIPS</text><polygon fill="#A80036" points="823,1066.8828,813,1070.8828,823,1074.8828,819,1070.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="817" x2="1102" y1="1070.8828" y2="1070.8828"/><polygon fill="#A80036" points="75.5,1096.0156,65.5,1100.0156,75.5,1104.0156,71.5,1100.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="811" y1="1100.0156" y2="1100.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="81.5" y="1094.9497">Document feedback received</text><path d="M23,1115.0156 L87,1115.0156 L87,1122.0156 L77,1132.0156 L23,1132.0156 L23,1115.0156 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="660.5" x="23" y="1115.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="38" y="1128.0825">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="102" y="1127.2261">[If document capture successful]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="106.5" y1="1153.2813" y2="1153.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="106.5" x2="106.5" y1="1153.2813" y2="1166.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="106.5" y1="1166.2813" y2="1166.2813"/><polygon fill="#A80036" points="75.5,1162.2813,65.5,1166.2813,75.5,1170.2813,71.5,1166.2813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="375" x="71.5" y="1148.2153">Call client.finishSession() and proceed to "Capture Portrait"</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="683.5" y1="1175.2813" y2="1175.2813"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="386" x="28" y="1185.4917">[If document capture failed (timeout or other capture error)]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="106.5" y1="1210.2188" y2="1210.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="106.5" x2="106.5" y1="1210.2188" y2="1223.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="106.5" y1="1223.2188" y2="1223.2188"/><polygon fill="#A80036" points="75.5,1219.2188,65.5,1223.2188,75.5,1227.2188,71.5,1223.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="600" x="71.5" y="1205.1528">Retry the document capture (close the video stream and repeat "Capture Document" section)</text><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1223" x="3" y="1258.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="1258.7852" y2="1258.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="1261.7852" y2="1261.7852"/><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="133" x="548" y="1248.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="554" y="1264.2856">Capture Portait</text><polygon fill="#A80036" points="666.5,1298.4844,676.5,1302.4844,666.5,1306.4844,670.5,1302.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="672.5" y1="1302.4844" y2="1302.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="71.5" y="1297.4185">Init liveness session</text><path d="M69,1315.4844 L69,1340.4844 L356,1340.4844 L356,1325.4844 L346,1315.4844 L69,1315.4844 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M346,1315.4844 L346,1325.4844 L356,1325.4844 L346,1315.4844 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="75" y="1332.5513">POST {API_URL}/identity-proofing/session</text><polygon fill="#A80036" points="1091,1366.75,1101,1370.75,1091,1374.75,1095,1370.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="678.5" x2="1097" y1="1370.75" y2="1370.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="685.5" y="1365.6841">Create liveness session</text><path d="M683,1383.75 L683,1408.75 L1217,1408.75 L1217,1393.75 L1207,1383.75 L683,1383.75 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1207,1383.75 L1207,1393.75 L1217,1393.75 L1207,1383.75 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="513" x="689" y="1400.8169">POST {GIPS_URL}/identities/${identityId}/attributes/portrait/live-capture-session</text><polygon fill="#A80036" points="75.5,1435.0156,65.5,1439.0156,75.5,1443.0156,71.5,1439.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="677.5" y1="1439.0156" y2="1439.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="81.5" y="1433.9497">Return liveness session id</text><polygon fill="#A80036" points="884,1464.1484,894,1468.1484,884,1472.1484,888,1468.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="890" y1="1468.1484" y2="1468.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="71.5" y="1463.0825">Start portrait capture</text><path d="M69,1481.1484 L69,1506.1484 L471,1506.1484 L471,1491.1484 L461,1481.1484 L69,1481.1484 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M461,1481.1484 L461,1491.1484 L471,1491.1484 L461,1481.1484 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="381" x="75" y="1498.2153">See "BioserverVideo.initFaceCaptureClient" in the codebase</text><polygon fill="#A80036" points="75.5,1532.4141,65.5,1536.4141,75.5,1540.4141,71.5,1536.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="895" y1="1536.4141" y2="1536.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="81.5" y="1531.3481">Receive portrait feedback</text><path d="M23,1551.4141 L87,1551.4141 L87,1558.4141 L77,1568.4141 L23,1568.4141 L23,1551.4141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="592.5" x="23" y="1551.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="38" y="1564.481">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="102" y="1563.6245">[If portait capture successful]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="106.5" y1="1589.6797" y2="1589.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="106.5" x2="106.5" y1="1589.6797" y2="1602.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="106.5" y1="1602.6797" y2="1602.6797"/><polygon fill="#A80036" points="75.5,1598.6797,65.5,1602.6797,75.5,1606.6797,71.5,1602.6797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="71.5" y="1584.6138">Continue to "Poll identity status".</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="615.5" y1="1611.6797" y2="1611.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="371" x="28" y="1621.8901">[If portrait capture failed (timeout or other capture error)]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="106.5" y1="1646.6172" y2="1646.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="106.5" x2="106.5" y1="1646.6172" y2="1659.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="106.5" y1="1659.6172" y2="1659.6172"/><polygon fill="#A80036" points="75.5,1655.6172,65.5,1659.6172,75.5,1663.6172,71.5,1659.6172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="532" x="71.5" y="1641.5513">Retry portait capture (close the video stream and repeat "Capture Portrait" section)</text><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1223" x="3" y="1695.1836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="1695.1836" y2="1695.1836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1226" y1="1698.1836" y2="1698.1836"/><rect fill="#EEEEEE" filter="url(#f3sk17wiyl3l3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="158" x="535.5" y="1684.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="541.5" y="1700.6841">Poll identity status</text><polygon fill="#A80036" points="666.5,1759.0156,676.5,1763.0156,666.5,1767.0156,670.5,1763.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="672.5" y1="1763.0156" y2="1763.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="71.5" y="1757.9497">Check identity status</text><path d="M69,1776.0156 L69,1801.0156 L591,1801.0156 L591,1786.0156 L581,1776.0156 L69,1776.0156 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M581,1776.0156 L581,1786.0156 L591,1786.0156 L581,1776.0156 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="501" x="75" y="1793.0825">GET {API_URL}/identity-proofing/check-identity-status?identityId=${identityId}</text><polygon fill="#A80036" points="1091,1827.2813,1101,1831.2813,1091,1835.2813,1095,1831.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="678.5" x2="1097" y1="1831.2813" y2="1831.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="685.5" y="1826.2153">Check identity status</text><path d="M683,1844.2813 L683,1869.2813 L1003,1869.2813 L1003,1854.2813 L993,1844.2813 L683,1844.2813 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M993,1844.2813 L993,1854.2813 L1003,1854.2813 L993,1844.2813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="689" y="1861.3481">GET {GIPS_URL}/identities/${identityId}/status</text><polygon fill="#A80036" points="689.5,1895.5469,679.5,1899.5469,689.5,1903.5469,685.5,1899.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="683.5" x2="1102" y1="1899.5469" y2="1899.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="695.5" y="1894.481">Return identity status</text><polygon fill="#A80036" points="75.5,1924.6797,65.5,1928.6797,75.5,1932.6797,71.5,1928.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="677.5" y1="1928.6797" y2="1928.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="81.5" y="1923.6138">Return identity status</text><path d="M23,1943.6797 L87,1943.6797 L87,1950.6797 L77,1960.6797 L23,1960.6797 L23,1943.6797 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="750.5" x="23" y="1943.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="38" y="1956.7466">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="102" y="1955.8901">[When identity status is ready]</text><polygon fill="#A80036" points="666.5,1977.9453,676.5,1981.9453,666.5,1985.9453,670.5,1981.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="672.5" y1="1981.9453" y2="1981.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="71.5" y="1976.8794">Fetch proofings result</text><path d="M69,1994.9453 L69,2019.9453 L530,2019.9453 L530,2004.9453 L520,1994.9453 L69,1994.9453 " fill="#FBFB77" filter="url(#f3sk17wiyl3l3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M520,1994.9453 L520,2004.9453 L530,2004.9453 L520,1994.9453 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="75" y="2012.0122">GET {API_URL}/identity-proofing/get-identity?identityId=${identityId}</text><!--MD5=[bbdb4d0fa78098ea53e7e5f8856ef0cf]
@startuml
actor "Browser" as ua
participant "Your custom backend" as api
participant "WebDoc" as doc
participant "WebBio" as bio
participant "GIPS" as gips

== Initialization ==

ua -> doc : Request document capture JavaScript SDK files
doc - -> ua
ua -> bio : Request liveness (portrait) capture JavaScript SDK files
bio - -> ua
ua -> doc : Check network conditions for Document Scan
doc - -> ua
ua -> bio : Check network conditions for Liveness (portrait)
bio - -> ua

ua -> api : Create GIPS Identity
note right of ua: POST {API_URL}/identity-proofing/identity

api -> gips : Create GIPS Identity
note right of api: POST {GIPS_URL}/identities/

gips - -> api : Receive GIPS Identity
api - -> ua : Receive GIPS Identity

ua -> api : Create document session
note right of ua: POST {GIPS_URL}/document/session

api -> gips : Create document session
note right of api: POST {GIPS_URL}/identities/${identityId}/id-documents/live-capture-session

gips - -> api : Receive GIPS sessionId

api - -> ua : Pass sessionId and identityId back to User Agent

== Session is now ready ==

ua -> api: Send portrait consent

note right of ua: POST {API_URL}/identity-proofing/consents
api -> gips
note right of api: POST {GIPS_URL}/identities/${identityId}/consents
gips - -> api : Consent ID
api - -> ua : Return consent ID to User Agent

== Capture document ==

ua -> doc : Initialize doc capture client in the browser
note right of ua: See call to 'DocserverVideo.initDocCaptureClient'

doc -> gips: Data processing and aggregation on GIPS
gips -> doc

doc - -> ua : Document feedback received

alt If document capture successful
  ua -> ua: Call client.finishSession() and proceed to "Capture Portrait"
else If document capture failed (timeout or other capture error)
  ua -> ua : Retry the document capture (close the video stream and repeat "Capture Document" section)
end

== Capture Portait ==
ua -> api : Init liveness session
note right of ua: POST {API_URL}/identity-proofing/session
api -> gips: Create liveness session
note right of api: POST {GIPS_URL}/identities/${identityId}/attributes/portrait/live-capture-session
api - -> ua : Return liveness session id
ua -> bio : Start portrait capture
note right of ua: See "BioserverVideo.initFaceCaptureClient" in the codebase
bio - -> ua : Receive portrait feedback

alt If portait capture successful
ua -> ua : Continue to "Poll identity status".
else If portrait capture failed (timeout or other capture error)
ua -> ua : Retry portait capture (close the video stream and repeat "Capture Portrait" section)
end

== Poll identity status ==
loop
ua -> api : Check identity status
note right of ua: GET {API_URL}/identity-proofing/check-identity-status?identityId=${identityId} 
api -> gips : Check identity status
note right of api: GET {GIPS_URL}/identities/${identityId}/status

gips - -> api : Return identity status
api - -> ua : Return identity status

alt When identity status is ready
  ua -> api : Fetch proofings result 
  note right of ua: GET {API_URL}/identity-proofing/get-identity?identityId=${identityId}
end
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.14.1+1-Ubuntu-0ubuntu1.21.10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>